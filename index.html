<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å°ç£å¥½é³¥ - Taiwan Good Bird</title>
    <script src="https://unpkg.com/@googlemaps/markerclusterer/dist/index.min.js"></script>

    <style>
        /* === åŸºç¤é‡ç½® === */
        * { box-sizing: border-box; }
        body, html { margin: 0; padding: 0; height: 100%; width: 100%; font-family: "Microsoft JhengHei", sans-serif; overflow: hidden; background: #f0f2f5;}
        
        /* === ä¸»å®¹å™¨ä½ˆå±€ (é›»è…¦ç‰ˆé è¨­ï¼šå·¦å³æ©«å‘) === */
        .container { 
            display: flex; 
            flex-direction: row; /* é›»è…¦ç‰ˆæ©«å‘æ’åˆ— */
            height: 100%; 
            width: 100%; 
            position: relative; 
        }
        
        /* 1. å·¦å´æ¬„ä½ (åˆ—è¡¨) - é›»è…¦ç‰ˆå›ºå®šå¯¬åº¦ */
        .sidebar-left { 
            width: 360px; 
            background: white; 
            display: flex; 
            flex-direction: column; 
            border-right: 1px solid #ddd; 
            z-index: 20; 
            box-shadow: 2px 0 10px rgba(0,0,0,0.1); 
            height: 100%; 
            flex-shrink: 0; 
        }
        
        /* 2. ä¸­é–“åœ°åœ– - ä½”æ»¿å‰©é¤˜ç©ºé–“ */
        #map { 
            flex-grow: 1; 
            height: 100%; 
            z-index: 10; 
        }
        
        /* 3. å³å´æ¬„ä½ (æœå°‹) - é›»è…¦ç‰ˆå›ºå®šå¯¬åº¦ */
        .sidebar-right { 
            width: 300px; 
            background: #fff; 
            border-left: 1px solid #ddd; 
            display: flex; 
            flex-direction: column; 
            z-index: 20; 
            height: 100%; 
            flex-shrink: 0;
            transition: transform 0.3s ease;
        }

        /* === å…§éƒ¨å…ƒä»¶æ¨£å¼ === */
        .header { padding: 15px; background: #2c3e50; color: white; text-align: center; font-weight: bold; font-size: 1.2rem; }
        
        /* Tab åˆ‡æ› */
        .tabs { display: flex; background: #ecf0f1; border-bottom: 1px solid #ddd; flex-shrink: 0; }
        .tab { flex: 1; padding: 12px; text-align: center; cursor: pointer; color: #7f8c8d; font-weight: bold; border-bottom: 3px solid transparent; transition: 0.3s; }
        .tab.active { color: #2c3e50; border-bottom: 3px solid #2c3e50; background: #fff; }

        /* åˆ—è¡¨æ²å‹•å€ */
        .list-container { flex: 1; overflow-y: auto; padding: 10px; -webkit-overflow-scrolling: touch; }
        
        /* åœ°é»å¡ç‰‡ */
        .loc-card { 
            background: white; border-radius: 8px; padding: 12px; margin-bottom: 10px; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.05); cursor: pointer; border-left: 4px solid #3498db; 
        }
        .loc-card:active { background-color: #f5f5f5; }
        .loc-name { font-weight: bold; font-size: 1rem; color: #2c3e50; margin-bottom: 5px; }
        .loc-meta { font-size: 0.85rem; color: #7f8c8d; display: flex; justify-content: space-between; align-items: center; }
        .count-badge { background: #e74c3c; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.75rem; font-weight: bold; }

        /* é³¥ç¨®ç¶²æ ¼ */
        .bird-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; padding: 10px; overflow-y: auto; flex: 1; }
        .bird-grid-item { 
            display: flex; flex-direction: column; align-items: center; text-align: center; 
            cursor: pointer; padding: 5px; border-radius: 6px; border: 1px solid transparent; 
        }
        .bird-grid-item.active { background: #e8f6fd; border-color: #3498db; }
        .bird-img { width: 60px; height: 60px; border-radius: 50%; object-fit: cover; background: #eee; margin-bottom: 5px; }
        .bird-name { font-size: 0.8rem; color: #333; line-height: 1.2; }

        /* è©³æƒ…é¢æ¿ */
        .detail-panel { 
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            background: white; z-index: 30; display: none; flex-direction: column; 
        }
        .detail-header { padding: 10px 15px; border-bottom: 1px solid #eee; display: flex; align-items: center; gap: 10px; background: #f8f9fa; }
        .back-btn { background: none; border: none; font-size: 1.5rem; cursor: pointer; padding: 0 10px; color: #2c3e50; }
        .detail-content { flex: 1; overflow-y: auto; padding: 15px; }
        
        /* è§€æ¸¬é …ç›® */
        .obs-item { display: flex; gap: 10px; margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 10px; }
        .obs-img { width: 80px; height: 80px; border-radius: 6px; object-fit: cover; background: #eee; flex-shrink: 0; }
        .obs-info { flex: 1; }
        .obs-time { font-size: 0.8rem; color: #888; margin-bottom: 4px; }
        .obs-bird { font-weight: bold; font-size: 1rem; color: #2c3e50; }
        .obs-desc { font-size: 0.85rem; color: #555; margin-top: 4px; line-height: 1.4; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }

        /* æ‰‹æ©Ÿç‰ˆæµ®å‹•æŒ‰éˆ• (é è¨­éš±è—) */
        .mobile-float-btn {
            display: none; /* é›»è…¦ç‰ˆä¸é¡¯ç¤º */
            position: fixed; /* ä½¿ç”¨ fixed ç¢ºä¿ä¸éš¨åœ°åœ–æ²å‹• */
            top: 15px; 
            right: 15px; 
            z-index: 1000;
            background: white; 
            padding: 8px 15px; 
            border-radius: 25px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3); 
            font-weight: bold; 
            font-size: 0.95rem;
            color: #2c3e50;
            align-items: center; 
            gap: 5px;
            cursor: pointer;
            border: 1px solid #ddd;
        }

        /* =========================================
           RWD æ ¸å¿ƒä¿®æ­£ï¼šæ‰‹æ©Ÿç‰ˆ (<768px)
           ========================================= */
        @media (max-width: 768px) {
            /* 1. æ”¹ç‚ºå‚ç›´æ’åˆ— */
            .container { 
                flex-direction: column; 
            }

            /* 2. åœ°åœ–åœ¨ä¸Šæ–¹ï¼Œé«˜åº¦å›ºå®š 35% */
            #map { 
                width: 100%; 
                height: 35%; 
                order: 1; /* æ’ç¬¬ä¸€å€‹ */
            }

            /* 3. åˆ—è¡¨åœ¨ä¸‹æ–¹ï¼Œé«˜åº¦å›ºå®š 65% */
            .sidebar-left { 
                width: 100%; 
                height: 65%; 
                order: 2; /* æ’ç¬¬äºŒå€‹ */
                border-right: none; 
                border-top: 2px solid #ddd; 
            }

            /* 4. å³å´æœå°‹æ¬„ï¼šé è¨­éš±è—ï¼Œé–‹å•Ÿæ™‚è®Šæˆå…¨è¢å¹•è¦†è“‹ */
            .sidebar-right { 
                display: none; /* é è¨­éš±è— */
                position: fixed;
                top: 0; 
                left: 0;
                width: 100%;
                height: 100%;
                z-index: 2000; /* æœ€ä¸Šå±¤ */
            }
            
            /* é¡¯ç¤ºæµ®å‹•æŒ‰éˆ• */
            .mobile-float-btn {
                display: flex;
            }
            
            /* ä¿®æ­£è©³æƒ…é åœ¨æ‰‹æ©Ÿç‰ˆçš„é«˜åº¦ */
            .detail-panel {
                height: 100%; /* ç¹¼æ‰¿ sidebar-left çš„é«˜åº¦ */
            }
        }
    </style>
</head>
<body>

<div class="mobile-float-btn" onclick="toggleMobileSearch()">
    ğŸ” æ‰¾é³¥ç¨®
</div>

<div class="container">
    <div class="sidebar-left">
        <div class="header">ğŸ¦ å°ç£å¥½é³¥ç³»çµ±</div>
        <div class="tabs">
            <div class="tab active" onclick="switchTab('record')">è¿‘æœŸç´€éŒ„</div>
            <div class="tab" onclick="switchTab('hotspot')">è³é³¥ç†±é»</div>
        </div>
        
        <div id="location-list-container" class="list-container">
            <div style="padding:20px; text-align:center; color:#999;">è¼‰å…¥è³‡æ–™ä¸­...</div>
        </div>

        <div id="hotspot-list-container" class="list-container" style="display:none;"></div>
        
        <div id="location-detail-panel" class="detail-panel">
            <div class="detail-header">
                <button class="back-btn" onclick="closeDetail()">â¬…</button>
                <h3 id="detail-title" style="margin:0; font-size:1.1rem; flex:1;">åœ°é»è©³æƒ…</h3>
            </div>
            <div id="detail-body" class="detail-content"></div>
        </div>
    </div>

    <div id="map"></div>

    <div class="sidebar-right" id="sidebar-right">
        <div style="padding:15px; border-bottom:1px solid #eee; display:flex; align-items:center; gap:10px; background:#f8f9fa;">
            <button onclick="toggleMobileSearch()" style="border:none; background:none; font-size:1.2rem; cursor:pointer; display:none;" id="mobile-close-search">âœ–</button>
            <input type="text" id="bird-search" placeholder="è¼¸å…¥é³¥ç¨®åç¨±æœå°‹..." 
                   style="flex:1; padding:10px; border:1px solid #ddd; border-radius:20px; outline:none;"
                   oninput="searchBirdGrid(this.value)">
        </div>
        <div id="bird-grid-container" class="bird-grid">
            </div>
        
        <div style="padding:10px; border-top:1px solid #eee; text-align:center;">
            <button onclick="resetFilter()" style="width:100%; padding:10px; background:#3498db; color:white; border:none; border-radius:6px; cursor:pointer;">é‡ç½® / é¡¯ç¤ºå…¨éƒ¨</button>
        </div>
    </div>
</div>

<script>
    let map;
    let markers = [];
    let markerCluster;
    let allBirdsData = {}; 
    let allRecentList = []; // æ‹å¹³å¾Œçš„è¿‘æœŸç´€éŒ„
    let allHotspotsList = []; // æ‹å¹³å¾Œçš„ç†±é»
    
    let currentTab = 'record';
    let currentFilterSpeciesCode = null;
    
    // åˆå§‹åŒ–åœ°åœ–
    async function initMap() {
        const center = { lat: 23.9738, lng: 120.9820 };
        map = new google.maps.Map(document.getElementById("map"), {
            zoom: 8,
            center: center,
            mapTypeControl: false,
            streetViewControl: false,
            fullscreenControl: false,
            clickableIcons: false, // é¿å…é»åˆ°åœ°åœ–åŸæœ‰åœ°æ¨™
            styles: [
                { featureType: "poi", elementType: "labels", stylers: [{ visibility: "off" }] }
            ]
        });

        await loadData();
        checkMobileUI();
    }

    // æª¢æŸ¥æ‰‹æ©Ÿç‰ˆ UI ç‹€æ…‹
    function checkMobileUI() {
        if(window.innerWidth <= 768) {
            document.getElementById('mobile-close-search').style.display = 'block';
        }
    }

    // â˜… è³‡æ–™è¼‰å…¥èˆ‡çµæ§‹è½‰æ›
    async function loadData() {
        try {
            const response = await fetch('static/birds_data.json?v=' + new Date().getTime());
            allBirdsData = await response.json();
            
            // 1. è™•ç† Recent è³‡æ–™ (Flattening: å°‡åˆ†çµ„è³‡æ–™è½‰ç‚ºå–®ä¸€åˆ—è¡¨)
            if (Array.isArray(allBirdsData.recent)) {
                allRecentList = allBirdsData.recent;
            } else {
                allRecentList = Object.values(allBirdsData.recent).flat();
            }

            // 2. è™•ç† Hotspots è³‡æ–™ (Flattening)
            allHotspotsList = Object.values(allBirdsData.hotspots).flat();

            console.log(`âœ… [ç³»çµ±] è¼‰å…¥å®Œæˆ: è¿‘æœŸ ${allRecentList.length} ç­†, ç†±é» ${allHotspotsList.length} è™•`);

            // 3. åˆå§‹æ¸²æŸ“
            renderBirdGrid(allRecentList);
            renderMarkers(allRecentList, false);
            renderLocationList(allRecentList);

        } catch (error) {
            console.error("è³‡æ–™è¼‰å…¥å¤±æ•—:", error);
            document.getElementById('location-list-container').innerHTML = '<div style="padding:20px;text-align:center;color:red;">è³‡æ–™è¼‰å…¥å¤±æ•—</div>';
        }
    }

    // --- Tab åˆ‡æ› ---
    function switchTab(tab) {
        currentTab = tab;
        document.querySelectorAll('.tab').forEach(el => el.classList.remove('active'));
        event.target.classList.add('active');
        
        document.getElementById('location-list-container').style.display = tab === 'record' ? 'block' : 'none';
        document.getElementById('hotspot-list-container').style.display = tab === 'hotspot' ? 'block' : 'none';
        
        closeDetail(); // åˆ‡æ› Tab æ™‚é—œé–‰è©³æƒ…

        if (tab === 'record') {
            const dataToShow = currentFilterSpeciesCode ? 
                allRecentList.filter(b => b.speciesCode === currentFilterSpeciesCode) : 
                allRecentList;
            renderMarkers(dataToShow, false);
            renderLocationList(dataToShow);
        } else {
            renderMarkers(allHotspotsList, true); 
            renderHotspotList(allHotspotsList);
        }
    }

    // --- â˜… åˆ—è¡¨æ¸²æŸ“ (ç¾¤çµ„åŒ–é‚è¼¯) ---
    function renderLocationList(data) {
        const container = document.getElementById('location-list-container');
        container.innerHTML = '';

        if (data.length === 0) {
            container.innerHTML = '<div style="padding:40px; text-align:center; color:#888;">æŸ¥ç„¡è³‡æ–™</div>';
            return;
        }

        // 1. çµ±è¨ˆåœ°é»è³‡æ–™
        const locStats = {};
        data.forEach(obs => {
            if (!locStats[obs.locName]) {
                locStats[obs.locName] = {
                    count: 0,
                    lat: obs.lat,
                    lng: obs.lng,
                    county: obs.county || "å°ç£",
                };
            }
            locStats[obs.locName].count++;
        });

        // 2. æ’åºä¸¦ç”Ÿæˆ HTML
        Object.entries(locStats)
            .sort((a, b) => b[1].count - a[1].count)
            .forEach(([name, info]) => {
                const div = document.createElement('div');
                div.className = 'loc-card';
                div.innerHTML = `
                    <div class="loc-name">${name}</div>
                    <div class="loc-meta">
                        <span style="background:#eee; padding:2px 6px; border-radius:4px;">${info.county}</span>
                        <span class="count-badge">æ­¤åœ° ${info.count} ç­†ç´€éŒ„</span>
                    </div>
                `;
                div.onclick = () => {
                    map.setCenter({ lat: info.lat, lng: info.lng });
                    map.setZoom(15);
                    openLocationDetail(name, info.lat, info.lng);
                };
                container.appendChild(div);
            });
    }

    function renderHotspotList(data) {
        const container = document.getElementById('hotspot-list-container');
        container.innerHTML = '';
        data.forEach(spot => {
            const div = document.createElement('div');
            div.className = 'loc-card';
            div.style.borderLeftColor = '#27ae60';
            div.innerHTML = `
                <div class="loc-name">ğŸŒŸ ${spot.name}</div>
                <div class="loc-meta" style="color:#555;">${spot.desc || 'çŸ¥åè³é³¥é»'}</div>
            `;
            div.onclick = () => {
                map.setCenter({ lat: spot.lat, lng: spot.lng });
                map.setZoom(14);
                openHotspotDetail(spot);
            };
            container.appendChild(div);
        });
    }

    // --- é³¥ç¨®éæ¿¾é€£å‹• ---
    function filterBirds(speciesCode) {
        currentFilterSpeciesCode = speciesCode;
        
        // 1. ç¯©é¸
        const filtered = allRecentList.filter(b => b.speciesCode === speciesCode);
        
        // 2. ç¢ºä¿åˆ‡æ›å›ç´€éŒ„ Tab
        if(currentTab !== 'record') {
            document.querySelectorAll('.tab')[0].click(); // è§¸ç™¼åˆ‡æ›
        }
        
        // 3. æ›´æ–°ä»‹é¢
        renderMarkers(filtered, false);
        renderLocationList(filtered);

        // 4. UI é«˜äº®
        document.querySelectorAll('.bird-grid-item').forEach(el => {
            if (el.dataset.code === speciesCode) el.classList.add('active');
            else el.classList.remove('active');
        });
        
        // 5. æ‰‹æ©Ÿç‰ˆï¼šé¸å®Œå¾Œè‡ªå‹•é—œé–‰æœå°‹é 
        if (window.innerWidth <= 768) {
            toggleMobileSearch();
        }
    }

    function resetFilter() {
        currentFilterSpeciesCode = null;
        renderMarkers(allRecentList, false);
        renderLocationList(allRecentList);
        document.querySelectorAll('.bird-grid-item').forEach(el => el.classList.remove('active'));
        if (window.innerWidth <= 768) toggleMobileSearch();
    }

    // --- æ¸²æŸ“æœå°‹ç¶²æ ¼ ---
    function renderBirdGrid(data) {
        const container = document.getElementById('bird-grid-container');
        const uniqueBirds = {};
        
        data.forEach(b => {
            if (!uniqueBirds[b.speciesCode]) {
                uniqueBirds[b.speciesCode] = {
                    name: b.name,
                    code: b.speciesCode,
                    img: b.wikiImg || 'https://via.placeholder.com/60?text=Bird'
                };
            }
        });

        const sortedBirds = Object.values(uniqueBirds).sort((a,b) => a.name.localeCompare(b.name, 'zh-Hant'));
        
        let html = '';
        sortedBirds.forEach(b => {
            html += `
                <div class="bird-grid-item" data-code="${b.code}" onclick="filterBirds('${b.code}')">
                    <img src="${b.img}" class="bird-img" loading="lazy" onerror="this.src='https://via.placeholder.com/60?text=Bird'">
                    <div class="bird-name">${b.name}</div>
                </div>
            `;
        });
        container.innerHTML = html;
    }

    // --- åœ°åœ–æ¨™è¨˜ ---
    function renderMarkers(data, isHotspotMode) {
        if (markerCluster) markerCluster.clearMarkers();
        markers = [];

        markers = data.map(item => {
            const marker = new google.maps.Marker({
                position: { lat: parseFloat(item.lat), lng: parseFloat(item.lng) },
                title: item.name,
                icon: isHotspotMode ? 'http://maps.google.com/mapfiles/ms/icons/green-dot.png' : null
            });

            marker.addListener("click", () => {
                if (isHotspotMode) openHotspotDetail(item);
                else openLocationDetail(item.locName, item.lat, item.lng);
            });
            return marker;
        });

        markerCluster = new markerClusterer.MarkerClusterer({ map, markers });
    }

    // --- è©³æƒ…é  ---
    async function openLocationDetail(locName, lat, lng) {
        const panel = document.getElementById('location-detail-panel');
        document.getElementById('detail-title').innerText = locName;
        const body = document.getElementById('detail-body');
        
        panel.style.display = 'flex';
        body.innerHTML = '<div style="text-align:center;padding:20px;">è¼‰å…¥æ°£è±¡èˆ‡é³¥æ³...</div>';

        // å¤©æ°£ API
        let weatherHtml = '';
        try {
            const wRes = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lng}&hourly=temperature_2m,weathercode&timezone=auto&forecast_days=1`);
            const wData = await wRes.json();
            const now = new Date().getHours();
            const temp = wData.hourly.temperature_2m[now];
            const code = wData.hourly.weathercode[now];
            const desc = code > 60 ? 'ğŸŒ§ï¸ æœ‰é›¨' : (code > 3 ? 'â˜ï¸ å¤šé›²' : 'â˜€ï¸ æ™´æœ—');
            
            weatherHtml = `
                <div style="background:linear-gradient(135deg, #a1c4fd, #c2e9fb); padding:15px; border-radius:8px; margin-bottom:15px;">
                    <h4 style="margin:0 0 5px 0;">ğŸŒ¤ï¸ å³æ™‚å¤©æ°£</h4>
                    <span style="font-size:1.5rem; font-weight:bold;">${temp}Â°C</span> ${desc}
                </div>
            `;
        } catch(e) {}

        // é³¥æ³åˆ—è¡¨
        const locBirds = allRecentList.filter(b => b.locName === locName);
        let birdsHtml = '<h4>ğŸ‘€ è¿‘æœŸè§€æ¸¬ç´€éŒ„</h4>';
        
        if(locBirds.length === 0) {
            birdsHtml += '<p>æ­¤åœ°é»æš«ç„¡è¿‘æœŸç´€éŒ„ã€‚</p>';
        } else {
            locBirds.forEach(b => {
                const timeStr = b.date ? b.date.substring(5, 16) : '--';
                birdsHtml += `
                    <div class="obs-item">
                        <img src="${b.wikiImg || 'https://via.placeholder.com/80'}" class="obs-img" onerror="this.src='https://via.placeholder.com/80'">
                        <div class="obs-info">
                            <div class="obs-bird">${b.name}</div>
                            <div class="obs-time">ğŸ•’ ${timeStr}</div>
                            <div class="obs-desc">${b.wikiDesc ? b.wikiDesc.substring(0, 50)+'...' : 'æš«ç„¡ç°¡ä»‹'}</div>
                        </div>
                    </div>
                `;
            });
        }

        body.innerHTML = weatherHtml + birdsHtml;
    }

    function openHotspotDetail(spot) {
        const panel = document.getElementById('location-detail-panel');
        document.getElementById('detail-title').innerText = spot.name;
        const body = document.getElementById('detail-body');
        panel.style.display = 'flex';
        
        let html = `<div style="padding:10px; background:#f0f9eb; border-radius:6px; margin-bottom:15px; color:#2c3e50;">${spot.desc}</div>`;
        html += '<h4>ğŸŒŸ ä»£è¡¨æ€§ / å¸¸é§é³¥ç¨®</h4>';
        
        if (spot.potential && spot.potential.length > 0) {
            spot.potential.forEach(b => {
                 html += `
                    <div class="obs-item">
                        <img src="${b.wikiImg || 'https://via.placeholder.com/80'}" class="obs-img" onerror="this.src='https://via.placeholder.com/80'">
                        <div class="obs-info">
                            <div class="obs-bird">${b.name}</div>
                            <div class="obs-desc">${b.wikiDesc ? b.wikiDesc.substring(0, 60)+'...' : 'æš«ç„¡ç°¡ä»‹'}</div>
                        </div>
                    </div>
                `;
            });
        } else {
            html += '<p>å°šç„¡è©³ç´°è³‡æ–™</p>';
        }
        body.innerHTML = html;
    }

    function closeDetail() {
        document.getElementById('location-detail-panel').style.display = 'none';
    }
    
    // RWD æ‰‹æ©Ÿç‰ˆé³¥ç¨®æœå°‹é–‹é—œ
    function toggleMobileSearch() {
        const sidebar = document.getElementById('sidebar-right');
        if (sidebar.style.display === 'flex') {
            sidebar.style.display = 'none';
        } else {
            sidebar.style.display = 'flex'; // æ‰“é–‹æ™‚è®Šç‚º flex (å…¨è¢å¹•)
        }
    }

    // æœå°‹åŠŸèƒ½
    function searchBirdGrid(keyword) {
        const items = document.querySelectorAll('.bird-grid-item');
        items.forEach(item => {
            const name = item.querySelector('.bird-name').innerText;
            if (name.includes(keyword) || keyword === '') {
                item.style.display = 'flex';
            } else {
                item.style.display = 'none';
            }
        });
    }

    window.onload = function() {
        if(typeof google !== 'undefined') initMap(); 
    };

</script>

<script async defer src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY&callback=initMap"></script>

</body>
</html>
